Upstream-Status: Pending
Signed-off-by: Ross Burton <ross.burton@arm.com>

diff --git a/lib/autoconf/general.m4 b/lib/autoconf/general.m4
index 4f64186e..b94f1cfd 100644
--- a/lib/autoconf/general.m4
+++ b/lib/autoconf/general.m4
@@ -2982,8 +2982,10 @@ m4_ifval([$4], [],
 	 [m4_warn([cross],
 		  [$0 called without default to allow cross compiling])])dnl
 AS_IF([test "$cross_compiling" = yes],
-  [m4_default([$4],
-	   [AC_MSG_FAILURE([cannot run test program while cross compiling])])],
+  [m4_ifval([$4],
+            [_AS_ECHO_LOG([Using RUN_IFELSE default value])
+            $4],
+	          [AC_MSG_FAILURE([cannot run test program while cross compiling])])],
   [_AC_RUN_IFELSE($@)])
 ])
 
